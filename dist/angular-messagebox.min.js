angular.module("angular-messagebox",["ui.bootstrap.modal"]),function(){function n(){var n="static",a=!0,e="dialogs-default",r=!0,t=null,o="lg",s=!1;this.useBackdrop=function(a){angular.isDefined(a)&&(n=a)},this.useEscClose=function(n){angular.isDefined(n)&&(a=angular.equals(n,0)||angular.equals(n,"false")||angular.equals(n,"no")||angular.equals(n,null)||angular.equals(n,!1)?!1:!0)},this.useClass=function(n){angular.isDefined(n)&&(e=n)},this.useCopy=function(n){angular.isDefined(n)&&(r=!(angular.equals(n,0)||angular.equals(n,"false")||angular.equals(n,"no")||angular.equals(n,null)||angular.equals(n,!1)))},this.setWindowTmpl=function(n){angular.isDefined(n)&&(t=n)},this.setSize=function(n){angular.isDefined(n)&&(o=angular.equals(n,"sm")||angular.equals(n,"lg")||angular.equals(n,"md")?n:o)},this.useFontAwesome=function(){s=!0},this.$get=function(){return{commonConfig:{b:n,k:a,w:e,s:o,fa:s},confirmConfig:{templateUrl:"confirm.tpl.html",controller:"ConfirmMsgBoxCtrl"},errorConfig:{templateUrl:"error.tpl.html",controller:"ErrorMsgBoxCtrl"},notifyConfig:{templateUrl:"notify.tpl.html",controller:"NotifyMsgBoxCtrl"},waitConfig:{templateUrl:"wait.tpl.html",controller:"WaitMsgBoxCtrl"}}}}angular.module("angular-messagebox").provider("MessageBoxConfig",n)}(),function(){angular.module("angular-messagebox").constant("Constants",{defaultErrorHeader:"出错了!",defaultErrorMsg:"发生了一个未知错误,请联系管理员",defaultNotifyHeader:"提示:",defaultNotifyMsg:"飘出来一条未知内容的提示...",defaultConfirmHeader:"提示:",defaultConfirmMsg:"你确定要进行该操作么?",defaultWaitHeader:"提示:",defaultWaitMsg:"数据加载中...",eventWaitComplete:"event:messagebox-wait-complete",eventWaitProgress:"event:messagebox-wait-progress",eventWaitMessage:"event:messagebox-wait-message"})}(),function(){function n(n,a,e,r,t){n.header=a.trustAsHtml(angular.isDefined(r.header)?r.header:t.defaultErrorHeader),n.msg=a.trustAsHtml(angular.isDefined(r.msg)?r.msg:t.defaultErrorMsg),n.icon=angular.isDefined(r.fa)&&angular.equals(r.fa,!0)?"fa fa-warning":"glyphicon glyphicon-warning-sign",n.close=function(){e.close(),n.$destroy()}}function a(n,a,e,r,t){n.header=a.trustAsHtml(angular.isDefined(r.header)?r.header:t.defaultConfirmHeader),n.msg=a.trustAsHtml(angular.isDefined(r.msg)?r.msg:t.defaultConfirmMsg),n.icon=angular.isDefined(r.fa)&&angular.equals(r.fa,!0)?"fa fa-check":"glyphicon glyphicon-check",n.no=function(){e.dismiss("no")},n.yes=function(){e.close("yes")}}function e(n,a,e,r,t){n.header=a.trustAsHtml(angular.isDefined(r.header)?r.header:t.defaultNotifyHeader),n.msg=a.trustAsHtml(angular.isDefined(r.msg)?r.msg:t.defaultNotifyMsg),n.icon=angular.isDefined(r.fa)&&angular.equals(r.fa,!0)?"fa fa-info":"glyphicon glyphicon-info-sign",n.close=function(){e.close(),n.$destroy()}}function r(n,a,e,r,t,o){n.header=a.trustAsHtml(angular.isDefined(t.header)?t.header:o.defaultWaitHeader),n.msg=a.trustAsHtml(angular.isDefined(t.msg)?t.msg:o.defaultWaitMsg),n.progress=angular.isDefined(t.progress)?t.progress:100,n.icon=angular.isDefined(t.fa)&&angular.equals(t.fa,!0)?"fa fa-clock-o":"glyphicon glyphicon-time",n.$on(o.eventWaitComplete,function(){e(function(){r.close(),n.$destroy()})}),n.$on(o.eventWaitMessage,function(a,e){n.msg=angular.isDefined(e.msg)?e.msg:n.msg}),n.$on(o.eventWaitProgress,function(a,e){n.msg=angular.isDefined(e.msg)?e.msg:n.msg,n.progress=angular.isDefined(e.progress)?e.progress:n.progress}),n.getProgress=function(){return{width:n.progress+"%"}}}angular.module("angular-messagebox").controller("ErrorMsgBoxCtrl",n).controller("ConfirmMsgBoxCtrl",a).controller("NotifyMsgBoxCtrl",e).controller("WaitMsgBoxCtrl",r),n.$inject=["$scope","$sce","$modalInstance","data","Constants"],a.$inject=["$scope","$sce","$modalInstance","data","Constants"],e.$inject=["$scope","$sce","$modalInstance","data","Constants"],r.$inject=["$scope","$sce","$timeout","$modalInstance","data","Constants"]}(),function(){function n(n,a){var e=function(n){var e=a.commonConfig;return n=n||{},angular.isDefined(n.keyboard)&&(e.k=n.keyboard),angular.isDefined(n.backdrop)&&(e.b=n.backdrop),angular.isDefined(n.size)&&(e.s=n.size),angular.isDefined(n.windowClass)&&(e.w=n.windowClass),e};return{error:function(r,t,o){return o=e(o),n.open({templateUrl:a.errorConfig.templateUrl,controller:a.errorConfig.controller,backdrop:o.b,keyboard:o.k,windowClass:o.w,size:o.s,resolve:{data:function(){return{header:angular.copy(t),msg:angular.copy(r),fa:a.commonConfig.fa}}}})},notify:function(r,t,o){return o=e(o),n.open({templateUrl:a.notifyConfig.templateUrl,controller:a.notifyConfig.controller,backdrop:o.b,keyboard:o.k,windowClass:o.w,size:o.s,resolve:{data:function(){return{header:angular.copy(t),msg:angular.copy(r),fa:a.commonConfig.fa}}}})},wait:function(r,t,o,s){return s=e(s),n.open({templateUrl:a.waitConfig.templateUrl,controller:a.waitConfig.controller,backdrop:s.b,keyboard:s.k,windowClass:s.w,size:s.s,resolve:{data:function(){return{header:angular.copy(o),msg:angular.copy(r),progress:angular.copy(t),fa:a.commonConfig.fa}}}})},confirm:function(r,t,o){return o=e(o),n.open({templateUrl:a.confirmConfig.templateUrl,controller:a.confirmConfig.controller,backdrop:o.b,keyboard:o.k,windowClass:o.w,size:o.s,resolve:{data:function(){return{header:angular.copy(t),msg:angular.copy(r),fa:a.commonConfig.fa}}}})}}}angular.module("angular-messagebox").factory("MessageBox",n),n.$inject=["$modal","MessageBoxConfig"]}(),angular.module("angular-messagebox").run(["$templateCache",function(n){n.put("confirm.tpl.html",'<div class="modal-header dialog-header-confirm">\r\n    <button type="button" class="close" ng-click="no()">&times;</button>\r\n    <h4 class="modal-title">\r\n        <span ng-class="icon"></span>\r\n        <span ng-bind-html="header"></span>\r\n    </h4>\r\n</div>\r\n<div class="modal-body" ng-bind-html="msg"></div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-default" ng-click="yes()">确定</button>\r\n    <button type="button" class="btn btn-primary" ng-click="no()">取消</button>\r\n</div>'),n.put("error.tpl.html",'<div class="modal-header dialog-header-error">\r\n    <button type="button" class="close" ng-click="close()">&times;</button>\r\n    <h4 class="modal-title text-danger">\r\n        <span ng-class="icon"></span>\r\n        <span ng-bind-html="header"></span>\r\n    </h4>\r\n</div>\r\n<div class="modal-body text-danger" ng-bind-html="msg"></div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-default" ng-click="close()">\r\n        确定\r\n    </button>\r\n</div>'),n.put("notify.tpl.html",'<div class="modal-header dialog-header-notify">\r\n    <button type="button" class="close" ng-click="close()">&times;</button>\r\n    <h4 class="modal-title text-info">\r\n        <span ng-class="icon"></span>\r\n        <span ng-bind-html="header"></span>\r\n    </h4>\r\n</div>\r\n<div class="modal-body text-info" ng-bind-html="msg"></div>\r\n<div class="modal-footer">\r\n    <button type="button" class="btn btn-primary" ng-click="close()">\r\n        确定\r\n    </button>\r\n</div>'),n.put("wait.tpl.html",'<div class="modal-header dialog-header-wait">\r\n    <h4 class="modal-title">\r\n        <span class="icon"></span>\r\n        <span ng-bind-html="header"></span>\r\n    </h4>\r\n</div>\r\n<div class="modal-body">\r\n    <p ng-bind-html="msg"></p>\r\n\r\n    <div class="progress progress-striped active">\r\n        <div class="progress-bar progress-bar-info" ng-style="getProgress()"></div>\r\n    </div>\r\n</div>')}]);